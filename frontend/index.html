<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>H√°bitos ‚Äì Maqueta</title>
  <link rel="stylesheet" href="./styles.css?v=2">
</head>
<!-- Toasts -->
<div id="toast-wrap" aria-live="polite" aria-atomic="true"></div>

<body data-auth="guest">
  <header class="topbar">
    <div class="topbar-inner">
      <div class="brand"><span class="dot"></span> H√°bitos</div>
      <div class="actions">
        <button id="themeBtn" class="btn ghost" title="Alternar tema">üåì</button>
        <button id="logoutBtn" class="btn">Salir</button>
      </div>
    </div>
    <style>
  #postModal {
    position: fixed;
    top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.4);
    z-index: 9999;
    display: flex;
    align-items: center;
    justify-content: center;
  }

  #postModal .sheet {
    background: white;
    padding: 20px;
    border-radius: 10px;
    width: 100%;
    max-width: 500px;
    z-index: 10000;
    box-shadow: 0 5px 15px rgba(0,0,0,0.3);
  }

  #myPostsFeedList {
    overflow-y: auto;
    max-height: calc(100vh - 300px); /* da espacio visual */
    padding-bottom: 3rem;
  }
  #postModal[aria-hidden="true"] {
  display: none;
}
</style>

  </header>

  <main class="container">
    <!-- Tabs -->
    <div class="tabs" id="tabs">
      <button class="tab active" data-page="home">Inicio</button>
      <button class="tab" data-page="habits">H√°bitos</button>
      <button class="tab" data-page="stats">Estad√≠sticas</button>
      <button class="tab" data-page="friends">Amigos</button>  <!-- ‚Üê NUEVO -->
      <button class="tab" data-page="profile">Perfil</button>
      <button class="tab" data-page="posts">Mis Posts</button>

    </div>


<!-- AUTH -->
<section id="page-auth" class="page">
  <!-- Bienvenida -->

  <div class="auth card">

    <!-- Toggle entre Login y Crear cuenta -->
    <div class="auth-tabs">
      <button class="auth-tab active" data-authview="login">Iniciar sesi√≥n</button>
      <button class="auth-tab" data-authview="signup">Crear cuenta</button>
    </div>

    <!-- LOGIN -->
    <div id="auth-login" class="auth-view">
      <h2>Bienvenido üëã</h2>
      <p class="muted">Ingresa con tu usuario y contrase√±a.</p>
      <div class="field">
        <label>Usuario</label>
        <input id="login-username" type="text" placeholder="usuario" />
      </div>
      <div class="field">
        <label>Contrase√±a</label>
        <input id="login-pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
      </div>
      <div style="display:flex; gap:8px">
        <button id="loginBtn" class="btn primary">Iniciar sesi√≥n</button>
      </div>
      <div class="switch-auth hint">
        ¬øNo tienes cuenta? <a href="#" id="go-signup">Crear cuenta</a>
      </div>
    </div>

    <!-- SIGNUP -->
    <div id="auth-signup" class="auth-view" hidden>
      <h2>Crea tu cuenta ‚ú®</h2>
      <p class="muted">Completa tus datos para personalizar tu perfil.</p>

      <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(180px,1fr)); gap:10px">
        <div class="field">
          <label>Correo</label>
          <input id="su-email" type="email" placeholder="tu@correo.com" />
        </div>
        <div class="field">
          <label>Usuario</label>
          <input id="su-username" type="text" placeholder="usuario" />
        </div>
        <div class="field">
          <label>Contrase√±a</label>
          <input id="su-pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢‚Ä¢" />
        </div>
        <div class="field">
          <label>Nombre</label>
          <input id="su-firstname" type="text" placeholder="Nombre" />
        </div>
        <div class="field">
          <label>Apellido</label>
          <input id="su-lastname" type="text" placeholder="Apellido" />
        </div>
        <div class="field">
          <label>Fecha de nacimiento</label>
          <input type="date" id="su-birth" required pattern="\d{4}-\d{2}-\d{2}">
        </div>
        <div class="field">
          <label>G√©nero</label>
          <select id="su-gender">
            <option value="">Selecciona‚Ä¶</option>
            <option value="F">Femenino</option>
            <option value="M">Masculino</option>
            <option value="Otro">Otro</option>
          </select>
        </div>
      </div>

      <div style="display:flex; gap:8px; margin-top:10px">
        <button id="signupBtn" class="btn primary">Crear cuenta</button>
        <button id="go-login" class="btn">Ya tengo cuenta</button>
      </div>
    </div>
  </div>
</section>
<!-- INICIO (home) -->
<!-- version 2 del home -->
 <!-- HOME -->
<!-- <section id="page-home" class="page" hidden>
  <div class="grid">
    <div class="card">
      <h3>Recomendados para ti</h3>
      <p class="muted">Perfiles p√∫blicos basados en amigos de amigos, h√°bitos similares y usuarios con alta actividad.</p>
      <div id="recGrid" class="grid" style="grid-template-columns:repeat(auto-fill, minmax(220px,1fr)); gap:12px"></div>
    </div>

    <div class="card">
      <div style="display:flex; align-items:center; justify-content:space-between; gap:8px">
        <h3>Ranking</h3>
        <select id="rankWindow" class="btn" style="padding:6px 10px">
          <option value="7">√öltimos 7 d√≠as</option>
          <option value="30">√öltimos 30 d√≠as</option>
        </select>
      </div>
      <div id="rankGrid" class="grid" style="grid-template-columns:repeat(auto-fill,minmax(260px,1fr)); gap:10px"></div>
    </div>
  </div>
</section> -->

<!-- version 3 home -->
<!-- INICIO -->
<section id="page-home" class="page" hidden>
  <div class="home-layout container">

    <!-- Columna izquierda (carrusel + feed) -->
    <div class="home-main">
      <!-- Recomendaciones como carrusel -->
      <div class="card">
        <div class="card-head">
          <h2>Recomendados para ti</h2>
          <div class="hint">Perfiles p√∫blicos basados en amigos de amigos, h√°bitos similares y actividad.</div>
        </div>

        <div class="h-carousel" id="recCarousel" aria-label="Carrusel de recomendaciones">
          <!-- tarjetas de recomendaci√≥n se inyectan por JS -->
        </div>
      </div>

      <!-- Feed + bot√≥n flotante para publicar -->
      <div class="card" style="position:relative">
        <div class="card-head">
          <h2>Feed</h2>
        </div>
        <div id="feedList" class="feed-list">
          <!-- posts por JS -->
        </div>
      </div>

      <!-- FAB para nueva publicaci√≥n -->
      <button id="fabNewPost" class="fab" title="Nueva publicaci√≥n">+</button>
    </div>

    <!-- Columna derecha (ranking fijo) -->
    <aside class="home-aside">
      <div class="card sticky">
        <div class="card-head" style="display:flex;justify-content:space-between;align-items:center">
          <h2>Ranking</h2>
          <span class="chip">√öltimos 7 d√≠as</span>
        </div>
        <div id="rankList" class="rank-list">
          <!-- ranking por JS -->
        </div>
      </div>
    </aside>
  </div>
</section>


<!-- Modal: crear publicaci√≥n -->
<div id="postModal" class="modal" aria-hidden="true">
  <div class="sheet">
    <h3>Nueva publicaci√≥n</h3>
    <div class="field">
      <label>Contenido</label>
      <textarea id="post-content" rows="4" placeholder="¬øQu√© quieres compartir hoy?"></textarea>
    </div>
    <div class="field">
      <label>Visibilidad</label>
      <select id="post-visibility">
        <option value="public">P√∫blica</option>
        <option value="friends">Solo amigos</option>
      </select>
    </div>
    <div style="display:flex;gap:8px;justify-content:flex-end">
      <button id="post-cancel" class="btn">Cancelar</button>
      <button id="post-submit" class="btn primary">Publicar</button>
    </div>
  </div>
</div>


<section id="page-posts" class="page" hidden>
  <div class="card" style="position:relative">
    <div class="card-head">
      <h3>My Own Posts</h3>
      <!-- <div style="display:flex; justify-content:center; margin-top:10px">
        <button id="feed-more" class="btn">Cargar m√°s</button>
      </div> -->
    </div>
    <div id="myPostsFeedList" class="grid" style="grid-template-columns:repeat(auto-fill,minmax(320px,1fr)); gap:12px">
      <!-- posts por JS -->
    </div>
  </div>
  <!-- FAB para nueva publicaci√≥n debo cambiar id para que funcione con la api -->
  <button id="fabNewPost2" class="fab" title="Nueva publicaci√≥n">+</button>
</section>


    <!-- HABITS -->
    <section id="page-habits" class="page" hidden>
      <div class="grid" id="habitGrid"></div>
      <button id="addHabitBtn" class="fab" title="Agregar h√°bito">+</button>
      <p class="hint">Toca un h√°bito para registrar si lo cumpliste hoy.</p>
    </section>

    <!-- STATS -->
    <section id="page-stats" class="page" hidden>
      <div class="grid" id="statsGrid"></div>
    </section>

    <!-- FRIENDS -->
<section id="page-friends" class="page" hidden>
  <div class="grid">
    <div class="card">
      <h3>Mis amigos</h3>
      <div id="friendsList" class="grid" style="grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:12px"></div>
    </div>

    <div class="card">
      <div style="display:flex; justify-content:space-between; align-items:center; gap:10px">
        <h3>Buscar perfiles p√∫blicos</h3>
        <input id="friendsSearch" type="search" placeholder="Busca por @usuario" class="input" style="min-width:260px" />
      </div>
      <div id="friendsSearchResults" class="grid" style="grid-template-columns:repeat(auto-fill,minmax(240px,1fr)); gap:12px; margin-top:10px"></div>
    </div>
  </div>
</section>

    <!-- PROFILE -->
    <section id="page-profile" class="page" hidden>
      <div class="card" style="display:flex; gap:14px; align-items:center">
        <div class="avatar"></div>
        <div>
          <h3 id="p-username">Usuario</h3>
          <div class="muted" id="p-email">correo@example.com</div>
        </div>
      </div>
      <div class="card" style="margin-top:12px">
        <h3>Ajustes</h3>
        <!-- Informaci√≥n de perfil -->
        <div class="card" style="margin-top:12px">
          <h3>Informaci√≥n de perfil</h3>
          <div id="profile-extra" class="profile-grid">
            <!-- Se llena desde app.js -->
          </div>
        </div>


        <!-- Editar perfil -->
        <div class="card" style="margin-top:12px">
          <h3>Editar perfil</h3>
          <div class="grid" style="grid-template-columns:repeat(auto-fit,minmax(220px,1fr)); gap:10px; margin-top:6px">
            <div class="field">
              <label>Nombre</label>
              <input id="ep-first" type="text" placeholder="Nombre">
            </div>
            <div class="field">
              <label>Apellido</label>
              <input id="ep-last" type="text" placeholder="Apellido">
            </div>
            <div class="field">
              <label>G√©nero</label>
              <select id="ep-gender">
                <option value="">Selecciona‚Ä¶</option>
                <option value="F">Femenino</option>
                <option value="M">Masculino</option>
                <option value="Otro">Otro</option>
              </select>
            </div>
            <div class="field">
              <label>Fecha de nacimiento</label>
              <input id="ep-birth" type="date">
            </div>
          </div>
          <div style="display:flex; gap:8px; margin-top:10px">
            <button id="ep-save" class="btn primary">Guardar cambios</button>
            <span id="ep-hint" class="hint"></span>
          </div>
        </div>
        <!-- Visibilidad del perfil -->
        <div class="card" style="margin-top:12px">
          <h3>Privacidad</h3>
          <div style="display:flex; align-items:center; gap:10px; margin-top:8px">
            <label class="muted" for="isPublic">Perfil p√∫blico</label>
            <input id="isPublic" type="checkbox" />
          </div>
          <div class="field" style="margin-top:10px">
            <label>Bio (200 m√°x.)</label>
            <textarea id="bio" rows="3" maxlength="200" placeholder="Cu√©ntale a otros sobre tus h√°bitos..."></textarea>
          </div>
          <div style="display:flex; gap:8px; margin-top:8px">
            <button id="pv-save" class="btn">Guardar</button>
            <div id="pv-hint" class="hint"></div>
          </div>
        </div>
        
        <!-- Tema oscuro -->
        <div style="display:flex; gap:10px; align-items:center; margin-top:8px">
          <label class="muted">Tema oscuro</label>
          <button id="themeBtn2" class="btn">Alternar</button>
        </div>
      </div>
    </section>
  </main>

  <!-- Modal para marcar cumplimiento de HOY -->
  <div id="modal" class="modal" aria-hidden="true">
    <div class="sheet">
      <h3 id="modalTitle">Registrar cumplimiento</h3>
      <p class="muted" id="modalDesc">¬øCumpliste el h√°bito hoy?</p>
      <div style="display:flex; gap:8px; margin-top:8px">
        <button id="doneBtn" class="btn primary">S√≠, cumplido</button>
        <button id="skipBtn" class="btn">No hoy</button>
        <button id="closeModal" class="btn ghost" style="margin-left:auto">Cerrar</button>
      </div>
    </div>
  </div>

    <!-- Modal: Agregar h√°bito minimalista -->
  <div id="addHabitModal" class="modal" aria-hidden="true">
    <div class="sheet" style="text-align:center; padding:24px;">
      <h3 style="margin-bottom:16px;">Nuevo h√°bito</h3>
      <input id="new-habit-name" 
            type="text" 
            placeholder="Ej. Beber 8 vasos de agua" 
            style="width:100%; padding:12px; border-radius:8px; border:1px solid var(--border-color);" />

      <div style="display:flex; justify-content:center; gap:10px; margin-top:20px;">
        <button id="createHabitBtn" class="btn primary">Agregar</button>
        <button id="cancelHabitBtn" class="btn">Cancelar</button>
      </div>
    </div>
  </div>

  <script>
    /* Si sirves el frontend desde el backend, deja vac√≠o.
       Si los separas, pon ej: window.API_BASE = 'http://localhost:8000' */
    window.API_BASE = "";
  </script>
  <script src="./app.js?v=2"></script>
</body>
</html>
